"use strict";$(function(){var a=null,c="",l=!1,r=!1,p=!1,t=!1,i=document.querySelector("#huadong-box"),e=!1;function s(){$("#div1").mousedown(function(s){var o=(s||window.event).offsetX;$(document).mousemove(function(s){var e=(s||window.event).clientX-i.offsetLeft+i.offsetWidth/2-o;if($("#div1").css("left",e+"px"),$("#div2").css("width",e+"px"),e<0&&(e=0,$("#div1").css("left",e+"px"),$("#div2").css("width",e+"px")),263<e){e=263,$("#div1").css("left",e+"px"),$("#div2").css("width",e+"px"),$("#span1").css("display","none");var n="c=phoneNum&phoneNum="+$(".inpt input").val();ajax("GET","../api/checkname.php",n,function(s){"yes"==s.trim()?(c=$(".inpt input").val(),$(".checkSu").html("验证成功！"),$(".isoklogo1").css("display","block"),$(".clickToCheck").css("display","none"),$(".CodeNum").css("display","block")):($(".checkSu").html("您的号码已注册"),$(".isoklogo2").css("display","block"))}),$("#div2").html("验证完成"),$("#div1").html("√"),$("#div1").off("mousedown")}s.preventDefault()}),$(document).mouseup(function(){$(document).off("mousemove")})})}$(".inpt input").blur(function(){var s=$(".inpt input").val();s?checkReg.tel(s)?($(".phoneNumb span").html("号码合法！"),$(".phoneNumb span").css("color","green"),e=!0):($(".phoneNumb span").html("请输入有效的号码！"),$(".phoneNumb span").css("color","red")):($(".phoneNumb span").html("电话号码不能为空！"),$(".phoneNumb span").css("color","red"))}),$(".inpt input").focus(function(){$(".phoneNumb span").html("")}),$(".clickToCheck").click(function(){e&&($("#zhezhao").css("display","block"),$("#huadong-box").css("display","block"))}),s(),$(".close").click(function(){$("#div1").css("left",0),$("#div2").css("width",0),$("#div2").html(""),$(".checkSu").html(""),$("#span1").css("display","block"),$(".isoklogo1").css("display","none"),$("#zhezhao").css("display","none"),$(".isoklogo2").css("display","none"),$("#huadong-box").css("display","none"),s()}),$(".getCode").click(function(){var s=(10*Math.random()).toFixed(0),e=(10*Math.random()).toFixed(0),n=(10*Math.random()).toFixed(0),o=(10*Math.random()).toFixed(0);a=""+s+e+n+o,alert("验证码为"+a),$(".getCode").html("重新获取"),$(".span-left ").css("display","block")}),$(".clickToNext").click(function(){$(".inputCode input").val()==a?($("#steps").css("display","none"),$("#usermessage").css("display","block"),$(".haveMargin1 span").css("background","#33bb44"),$(".haveMargin1 p").css("color","#33bb44")):alert("验证码不正确！")}),$("#username").blur(function(){var s=$("#username").val();if(s)if(checkReg.name(s)){ajax("GET","../api/checkname.php","c=username&username="+s,function(s){"yes"==s.trim()?l=!0:($(".user-span").html("用户名太受欢迎了，换个吧。"),$(".user-span").css("color","red"))})}else $(".user-span").html("用户名不合法"),$(".user-span").css("color","red");else $(".user-span").html("用户名不能为空"),$(".user-span").css("color","red")}),$("#username").focus(function(){$(".user-span").html("")}),$("#psw1").blur(function(){var s=$("#username").val(),e=$("#psw1").val();s||($(".user-span").html("用户名不能为空"),$(".user-span").css("color","red")),e?checkReg.psweasy(e)||($(".psw1-span").html("密码格式不对！"),$(".psw1-span").css("color","red")):($(".psw1-span").html("密码不能为空！"),$(".psw1-span").css("color","red"))}),$("#psw1").focus(function(){$(".psw1-span").html("")}),$("#psw2").blur(function(){var s=$("#psw1").val(),e=$("#psw2").val();$("#username").val()||($(".user-span").html("用户名不能为空"),$(".user-span").css("color","red")),s||($(".psw1-span").html("密码不能为空！"),$(".psw1-span").css("color","red")),e?s==e?r=!0:($(".psw2-span").html("密码错误！"),$(".psw2-span").css("color","red")):($(".psw2-span").html("请确认密码！"),$(".psw2-span").css("color","red"))}),$("#psw2").focus(function(){$(".psw2-span").html("")}),$("#userbrith").blur(function(){var s=$("#psw1").val(),e=$("#psw2").val(),n=$("#username").val(),o=$("#userbrith").val();n||($(".user-span").html("用户名不能为空"),$(".user-span").css("color","red")),s||($(".psw1-span").html("密码不能为空！"),$(".psw1-span").css("color","red")),e||($(".psw2-span").html("确认密码不能为空！"),$(".psw2-span").css("color","red")),o?checkReg.Birthdate(o)?(brithday=o,p=!0):($(".userbrith-span").html("出生日期格式不对"),$(".userbrith-span").css("color","red")):($(".userbrith-span").html("请填写出生日期！"),$(".userbrith-span").css("color","red"))}),$("#userbrith").focus(function(){$(".userbrith-span").html("")}),$("#e-mile").blur(function(){var s=$("#psw1").val(),e=$("#psw2").val(),n=$("#username").val(),o=$("#userbrith").val(),a=$("#e-mile").val();n||($(".user-span").html("用户名不能为空"),$(".user-span").css("color","red")),s||($(".psw1-span").html("密码不能为空！"),$(".psw1-span").css("color","red")),e||($(".psw2-span").html("确认密码不能为空！"),$(".psw3-span").css("color","red")),o||($(".userbrith-span").html("请填写出生日期！"),$(".userbrith-span").css("color","red")),a?checkReg.email(a)?t=!0:($(".e-mile-span").html("邮箱不正确"),$(".e-mile-span").css("color","red")):($(".e-mile-span").html("请填写邮箱"),$(".e-mile-span").css("color","red"))}),$("#e-mile").focus(function(){$(".e-mile-span").html("")}),$("#userReg").click(function(){var s=$("#e-mile").val().trim(),e=$("#userbrith").val().trim(),n=$("#username").val().trim(),o=$("#psw1").val().trim();if(l&&r&&p&&t){ajax("POST","../api/InsertUser.php","username="+n+"&psw="+o+"&phoneNum="+c+"&brith="+e+"&Email="+s,function(s){"yes"==s.trim()?($(".haveMargin2 span").css("background","#33bb44"),$(".haveMargin2 p").css("color","#33bb44"),alert("注册成功!"),location.href="denglu.html"):alert("注册失败！")})}})});